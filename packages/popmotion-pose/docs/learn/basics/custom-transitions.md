---
title: Custom transitions
description: How to use Popmotion to define custom transitions for posers
category: basics
next: animating-children
---

# Custom transitions

With automatic animations, it's easy to create snappy and playful animations just by defining poses.

But there's plenty of instances where we want full control over our animation. For this, we can use the `transition` property.

## `transition`

Just like CSS, every pose has a `transition` property. This is a function you can optionally provide that creates a [Popmotion animation](/api) (or `false`, for no animation).

Replace the `config` you added to either the [Pose](https://codepen.io/popmotion/pen/bvqJbV?editors=0010) or [React Pose](https://codepen.io/popmotion/pen/mxmrPZ?editors=0010) playgrounds with the following:

```javascript
const { tween } = popmotion

const config = {
  visible: { opacity: 1 },
  hidden: {
    opacity: 0,
    transition: (props) => tween({ ...props, duration: 1000 })
  }
}
```

As you can see, the animation now runs at `1000`ms: 

<CodePen id="qoVXKj" />

## `transition` props

This function is run **once, for every value being animated in the current pose**. This allows you to return a different animation for each value.

It's provided a single object, a `props` object. The object contains properties that you can use to decide which animation is being returned for each value.

### Pose-generated `props`

The following props are generated by Pose:

- `from`: The current state of this value
- `to`: The target state defined in the pose
- `velocity`: If a numerical value, the current velocity of the value
- `key`: The name of the current value
- `prevPoseKey`: The name of the pose this value was previously set to

For instance, we can use `key` to return a different animation based on the value being animated. Let's add a `scaleY` property to our poses, and use `key` to change return a different [easing](/api/easing) for it:

```javascript
const { easing, tween } = popmotion

const config = {
  visible: { scaleY: 1, opacity: 1 },
  hidden: {
    scaleY: 0,
    opacity: 0,
    transition: (props) => tween({
      ...props,
      duration: 1000,
      ease: props.key === 'opacity' ? easing.linear : easing.anticipate
    })
  }
}
```

<CodePen id="wmPrKV" />

You're also under no obligation to end the animation on the `to` property. You can do anything with the returned animation.

Set the `.box`'s `opacity` to `1` in the CSS. Now replace our `config` with a new set of poses:

```javascript
const config = {
  initialPose: 'rest',
  rest: { scale: 1 },
  alert: { scale: 1.2 }
}
```

Set the poser or posed component to "alert" and the box will transition to the `scale: 1.2` defined in that pose.

Now we can add a custom `transition` function that will return a `spring` animation with `damping` set to `0`. This will make the animating oscillate around the `to` value indefinitely:

```javascript
const config = {
  rest: { scale: 1 },
  alert: {
    scale: 1.2,
    transition: (props) => spring({
      ...props,
      stiffness: 20,
      damping: 0
    })
  }
}
```

<CodePen id="mxqBOo" />

We can add a `setTimeout` function that will set the `boxPoser` to `rest` after any amount of time:

```javascript
setTimeout(() => boxPoser.set('rest'), 2000)
```

Try changing the timeout duration. The box will animate smoothly from any point, even though the "alert" animation didn't end on its `to` value. And because `scale` uses a spring animation by default, it also maintains some of the property's velocity.

### User-generated `props`

This `props` object can also contain variables set by you.

#### Pose

In vanilla Pose, you can **statefully** set transition props both when the poser is defined:

```javascript
const poser = pose(element, {
  ...config,
  props: {}
})
```

And with the `setProps` method:

```javascript
poser.setProps({})
```

You can also **temporarily** set transition props by passing an object as the second argument of set:

```javascript
poser.set('poseName', {})
```

#### React Pose

With posed components, all extra props set on the component are passed through as transition props:

```javascript
<PosedComponent pose="poseName" customProp={true} />
```

## Dynamic pose props

You can also set pose props as functions that resolve when the pose is entered. These functions get passed all the same properties as `transition` (except for `to`, which these functions return).

For instance, we could pass through an `i` index property to animate something differently based on its position in a list:

```javascript
closed: {
  y: ({ i }) => i * 50
}
```

<CodePen id="jzXzdz" height="400" />

## Next

So far, we've shown how simple it is to animate a single element.

Traditionally, orchestrating animation across multiple elements has been an involved process. In the next tutorial we'll show how with Pose animating many elements is the same as animating just one.
